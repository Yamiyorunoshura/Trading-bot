# 📚 量化交易機器人 v1.03 - 使用手冊

## 🎯 目錄
- [快速開始](#快速開始)
- [功能介紹](#功能介紹)
- [使用教程](#使用教程)
- [高級功能 (v1.03)](#高級功能-v103)
- [高級配置](#高級配置)
- [故障排除](#故障排除)
- [常見問題](#常見問題)

## 🚀 快速開始

### 一鍵啟動
```bash
# macOS/Linux
./scripts/start_dev.sh

# Windows
scripts\start_dev.bat
```

### 手動啟動
```bash
# 1. 設置環境
cp .env.example .env

# 2. 安裝依賴
cargo build
cd frontend && npm install && cd ..

# 3. 啟動應用
cd frontend && npm run tauri dev
```

## 📊 功能介紹

### 1. 儀表板 (Dashboard)
**主要功能：**
- 📈 即時市場數據監控
- 💰 資產和盈虧統計
- 🔄 系統健康狀態
- 📊 盈利趨勢圖表

**使用方法：**
1. 啟動應用後自動顯示
2. 點擊"刷新數據"更新信息
3. 使用"啟動交易"/"停止交易"控制系統

### 2. 策略管理 (Strategy Management)
**主要功能：**
- 🎯 創建和編輯交易策略
- ⚡ 策略啟動/停止控制
- 📊 策略績效監控
- 🔧 參數調整和優化

**使用方法：**
1. 點擊"新增策略"創建策略
2. 選擇策略類型 (如：SMA交叉策略)
3. 設置交易對和參數
4. 點擊"啟動"開始運行

### 3. 盈利分析 (Profit Analysis)
**主要功能：**
- 📈 多維度盈利統計
- 📊 時間段分析
- 💹 風險調整收益
- 📋 詳細交易記錄

**使用方法：**
1. 選擇時間範圍（今日/7天/30天/自定義）
2. 篩選特定策略
3. 查看盈利趨勢和分析圖表
4. 導出報告

### 4. 回測分析 (Backtest Analysis)
**主要功能：**
- 🔬 策略歷史性能測試
- 📊 資金曲線分析
- 📈 績效指標計算
- 📋 詳細回測報告

**使用方法：**
1. 選擇要回測的策略
2. 設置回測時間範圍
3. 配置初始資金和手續費
4. 點擊"開始回測"運行測試

### 5. 風險管理 (Risk Management)
**主要功能：**
- ⚠️ 風險參數設置
- 📊 風險指標監控
- 🚨 風險警報系統
- 🔒 止損止盈控制

**使用方法：**
1. 設置最大回撤限制
2. 配置止損止盈比例
3. 設置倉位限制
4. 保存風險控制設置

### 6. 系統設置 (System Settings)
**主要功能：**
- 🔑 API密鑰管理
- 📧 通知設置
- 🗄️ 數據庫配置
- 📋 系統日誌查看

**使用方法：**
1. 配置交易所API密鑰
2. 設置Discord/郵件通知
3. 配置數據庫連接
4. 查看系統運行日誌

## 🚀 高級功能 (v1.03)

### 7. 智能參數優化 (Advanced Optimization)
**主要功能：**
- 🧠 智能優化算法選擇
- 📊 四種優化方法（網格搜索、遺傳算法、貝葉斯優化、隨機搜索）
- ⚡ 並行處理和性能預測
- 🎯 多目標優化支持

**使用方法：**
1. 在回測分析中選擇"參數優化"
2. 設置參數搜索範圍
3. 選擇優化目標（夏普比率、最大回撤等）
4. 點擊"開始優化"運行優化
5. 查看優化結果和參數建議

### 8. 高級風險分析 (Advanced Risk Analysis)
**主要功能：**
- 📊 七種核心風險指標（VaR、CVaR、Calmar、Omega、Sortino等）
- 🔬 壓力測試和極端情況模擬
- 🎲 蒙地卡羅風險預測
- 📈 A-F級風險評級系統

**使用方法：**
1. 在風險管理中選擇"高級分析"
2. 選擇風險指標類型
3. 設置分析參數
4. 運行風險分析
5. 查看風險報告和建議

### 9. 專業報告生成 (Professional Reporting)
**主要功能：**
- 📄 四種輸出格式（PDF、Excel、HTML、JSON）
- 🎨 可定制報告模板
- 📊 豐富的數據可視化
- 🔄 批量報告生成

**使用方法：**
1. 在分析結果頁面選擇"生成報告"
2. 選擇報告類型和格式
3. 自定義報告內容和樣式
4. 點擊"生成報告"
5. 下載或分享報告

### 10. 實時性能監控 (Performance Monitoring)
**主要功能：**
- ⚡ 全方位系統性能追蹤
- 🔍 智能瓶頸檢測
- 📊 實時UX指標監控
- 📈 性能基準和優化建議

**使用方法：**
1. 在系統設置中啟用"性能監控"
2. 查看實時性能指標
3. 監控系統資源使用
4. 接收性能優化建議

## 📖 使用教程

### 新手入門教程

#### 第1步：首次啟動
1. 運行 `./scripts/start_dev.sh`
2. 等待桌面應用打開
3. 查看儀表板確認系統正常

#### 第2步：創建第一個策略
1. 點擊左側菜單"策略管理"
2. 點擊"新增策略"按鈕
3. 填寫策略信息：
   - 策略名稱：測試SMA策略
   - 交易對：BTCUSDT
   - 策略類型：SMA交叉策略
   - 快速週期：10
   - 慢速週期：30
   - 最大倉位：1000 USD
4. 點擊"確定"創建

#### 第3步：運行回測
1. 點擊左側菜單"回測分析"
2. 選擇剛創建的策略
3. 設置回測參數：
   - 時間範圍：最近6個月
   - 初始資金：10000 USD
   - 手續費：0.1%
4. 點擊"開始回測"
5. 查看回測結果和資金曲線

#### 第4步：分析結果
1. 點擊左側菜單"盈利分析"
2. 查看盈利趨勢圖表
3. 分析風險指標
4. 查看詳細交易記錄

#### 第5步：設置風險控制
1. 點擊左側菜單"風險管理"
2. 設置風險參數：
   - 最大回撤：10%
   - 止損比例：2%
   - 止盈比例：4%
3. 點擊"保存設置"

### 高級用戶教程

#### 連接真實交易所
1. 註冊Binance帳戶並啟用API
2. 獲取API密鑰和密鑰
3. 在"系統設置"中配置：
   - API Key：您的真實API密鑰
   - API Secret：您的真實密鑰
   - 測試環境：關閉
4. 在 `.env` 文件中設置：
   ```
   BINANCE_TESTNET=false
   DEMO_MODE=false
   ```

#### 設置通知系統
1. 創建Discord Webhook URL
2. 在"系統設置"中配置：
   - 啟用Discord通知
   - 輸入Webhook URL
   - 選擇通知事件
3. 測試通知功能

#### 自定義策略參數
1. 在"策略管理"中編輯策略
2. 調整技術指標參數
3. 設置風險控制參數
4. 保存並測試新參數

### v1.03 高級功能教程

#### 智能參數優化
1. 在回測分析中選擇"參數優化"
2. 設置優化參數：
   - 優化目標：夏普比率
   - 參數範圍：快線週期 5-20，慢線週期 15-50
   - 優化算法：自動選擇
   - 最大迭代次數：100
3. 點擊"開始優化"
4. 等待優化完成，查看最佳參數組合

#### 高級風險分析
1. 在風險管理中選擇"高級分析"
2. 選擇分析類型：
   - VaR分析：價值風險計算
   - 壓力測試：極端情況模擬
   - 蒙地卡羅模擬：風險預測
3. 設置分析參數
4. 運行分析並查看結果

#### 專業報告生成
1. 在分析結果頁面選擇"生成報告"
2. 選擇報告類型：
   - 綜合報告：完整分析報告
   - 執行摘要：簡要總結
   - 風險報告：風險分析專項
   - 優化報告：參數優化結果
3. 選擇輸出格式：PDF、Excel、HTML、JSON
4. 自定義報告樣式和內容
5. 生成並下載報告

## ⚙️ 高級配置

### 配置文件詳解

#### config/config.toml
```toml
[application]
name = "trading-bot"
version = "1.03.0"
debug = true                    # 調試模式

[trading]
demo_mode = true               # 演示模式
initial_balance = 10000.0      # 初始資金
max_strategies = 10            # 最大策略數

[binance]
api_key = "your_key"           # API密鑰
api_secret = "your_secret"     # API密鑰
testnet = true                 # 測試網絡

[webserver]
host = "127.0.0.1"            # 服務器地址
port = 8080                   # 服務器端口

[optimization]
max_workers = 4               # 最大並行工作數
timeout_seconds = 3600        # 優化超時時間
early_stopping = true         # 早期停止

[risk_analysis]
var_confidence = 0.95         # VaR置信度
monte_carlo_simulations = 10000  # 蒙地卡羅模擬次數
stress_test_scenarios = 5     # 壓力測試場景數

[reporting]
default_format = "pdf"         # 默認報告格式
template_path = "templates"    # 模板路徑
enable_branding = true        # 啟用品牌定制
```

#### .env 文件
```bash
# 數據庫配置
DATABASE_URL=sqlite:./trading_bot.db

# API配置
BINANCE_API_KEY=your_key
BINANCE_API_SECRET=your_secret
BINANCE_TESTNET=true

# 應用配置
DEMO_MODE=true
LOG_LEVEL=info

# v1.03 高級功能配置
OPTIMIZATION_ENABLED=true
RISK_ANALYSIS_ENABLED=true
REPORTING_ENABLED=true
PERFORMANCE_MONITORING=true
```

### 數據庫設置

#### 使用SQLite (默認)
```bash
# 自動創建，無需額外配置
DATABASE_URL=sqlite:./trading_bot.db
```

#### 使用PostgreSQL
```bash
# 1. 安裝PostgreSQL
sudo apt install postgresql

# 2. 創建數據庫
createdb trading_bot

# 3. 設置環境變量
DATABASE_URL=postgresql://user:password@localhost/trading_bot
```

### 性能優化

#### 系統資源配置
```toml
[performance]
max_memory_usage = "2GB"      # 最大記憶體使用
cpu_threads = 4               # CPU線程數
cache_size = "512MB"          # 緩存大小
enable_gpu_acceleration = true # GPU加速
```

#### 優化建議
1. **記憶體優化**：
   - 設置適當的緩存大小
   - 定期清理歷史數據
   - 使用數據分頁

2. **CPU優化**：
   - 調整並行處理線程數
   - 啟用早期停止機制
   - 優化算法參數

3. **網絡優化**：
   - 使用WebSocket連接
   - 實現數據緩存
   - 優化API調用頻率

## 🛠️ 故障排除

### 常見問題

#### 1. 應用無法啟動
**症狀**：啟動腳本執行失敗
**解決方案**：
```bash
# 檢查環境
./scripts/diagnostic.sh

# 重新安裝依賴
cargo clean && cargo build
cd frontend && npm install
```

#### 2. 前端顯示錯誤
**症狀**：界面無法正常顯示
**解決方案**：
```bash
# 檢查Node.js版本
node --version  # 需要18+

# 重新安裝前端依賴
cd frontend
rm -rf node_modules package-lock.json
npm install
```

#### 3. 後端連接失敗
**症狀**：API調用失敗
**解決方案**：
```bash
# 檢查配置文件
cat config/config.toml

# 檢查環境變量
cat .env

# 重啟後端服務
cargo run
```

#### 4. 優化功能運行失敗
**症狀**：參數優化無法完成
**解決方案**：
1. 檢查參數範圍設置
2. 增加超時時間
3. 減少並行工作數
4. 檢查系統資源

#### 5. 風險分析錯誤
**症狀**：風險指標計算失敗
**解決方案**：
1. 檢查數據完整性
2. 調整置信度參數
3. 減少模擬次數
4. 檢查數據格式

### 性能問題

#### 1. 圖表渲染慢
**解決方案**：
- 減少數據點數量
- 啟用數據抽樣
- 使用虛擬化滾動
- 優化圖表配置

#### 2. 優化運行慢
**解決方案**：
- 減少參數搜索範圍
- 使用更高效的算法
- 增加並行處理
- 啟用早期停止

#### 3. 報告生成慢
**解決方案**：
- 選擇較簡單的格式
- 減少圖表數量
- 使用緩存機制
- 分批處理數據

## ❓ 常見問題

### Q: 如何選擇最佳優化算法？
A: 系統會根據參數空間大小自動選擇：
- 小參數空間（<10個參數）：網格搜索
- 中等參數空間（10-50個參數）：遺傳算法
- 大參數空間（>50個參數）：貝葉斯優化
- 複雜參數空間：隨機搜索

### Q: 風險分析需要多長時間？
A: 分析時間取決於：
- 數據量大小
- 模擬次數設置
- 計算機性能
- 分析類型複雜度

### Q: 如何自定義報告模板？
A: 在 `templates/` 目錄下創建自定義模板：
- HTML模板：`custom_report.html`
- CSS樣式：`custom_style.css`
- 配置文件：`template_config.json`

### Q: 性能監控會影響系統性能嗎？
A: 性能監控採用輕量級設計：
- 低頻率採樣（5秒間隔）
- 可配置監控級別
- 可隨時啟用/禁用
- 對系統性能影響<1%

### Q: 如何導出優化結果？
A: 優化結果支持多種導出格式：
- JSON格式：完整參數和結果
- CSV格式：表格化數據
- Excel格式：包含圖表和統計
- PDF格式：專業報告格式

---

**版本**: v1.03.0  
**最後更新**: 2024年12月  
**狀態**: ✅ 生產就緒